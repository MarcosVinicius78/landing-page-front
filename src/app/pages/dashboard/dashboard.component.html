<header class="bg-white shadow-md rounded-b-2xl px-6 py-4">
  <div class="max-w-7xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-4">
    <!-- Logo ou título -->
    <div class="text-2xl font-bold text-gray-800">Painel de Controle</div>

    <!-- Botões de navegação -->
    <nav class="flex gap-3">
      <button (click)="selecionarTab('DASHBOARD')" [class.bg-blue-100]="tab === 'DASHBOARD'"
        class="flex items-center gap-2 px-5 py-2 rounded-full font-semibold text-gray-700 hover:bg-blue-100 transition-all duration-300">
        Dashboard
      </button>
      <button (click)="selecionarTab('CONFIGURACAO')" [class.bg-blue-100]="tab === 'CONFIGURACAO'"
        class="flex items-center gap-2 px-5 py-2 rounded-full font-semibold text-gray-700 hover:bg-blue-100 transition-all duration-300">
        Configurar Links
      </button>
     
      <button (click)="selecionarTab('CONFIGUAR-PAGE')" [class.bg-blue-100]="tab === 'CONFIGUAR-PAGE'"
        class="flex items-center gap-2 px-5 py-2 rounded-full font-semibold text-gray-700 hover:bg-blue-100 transition-all duration-300">
        Configurar Landing Page
      </button>
    </nav>
  </div>
</header>

@if (tab.match('DASHBOARD')) {
<div class="p-6 min-h-screen bg-gray-50">
  <!-- Filtros -->
  <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
    <div>
      <label for="data" class="block text-sm font-medium text-gray-600 mb-1">Data inicio</label>
      <input type="date" id="data" [(ngModel)]="filtros.data"
        class="p-3 w-full rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 shadow-sm" />
    </div>
    
    <div>
      <label for="dataFim" class="block text-sm font-medium text-gray-600 mb-1">Data fim</label>
      <input type="date" id="dataFim" [(ngModel)]="filtros.dataFim"
        class="p-3 w-full rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 shadow-sm" />
    </div>

    <div>
      <label for="horaInicio" class="block text-sm font-medium text-gray-600 mb-1">Hora inicial</label>
      <input type="time" id="horaInicio" [(ngModel)]="filtros.horaInicio"
        class="p-3 w-full rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 shadow-sm" />
    </div>

    <div>
      <label for="horaFim" class="block text-sm font-medium text-gray-600 mb-1">Hora final</label>
      <input type="time" id="horaFim" [(ngModel)]="filtros.horaFim"
        class="p-3 w-full rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 shadow-sm" />
    </div>

    <div>
      <label for="sistemaSelect" class="block text-gray-700 font-semibold mb-1">
        Selecione o sistema:
      </label>
      <div class="relative">
        <select id="sistemaSelect" [(ngModel)]="sistemaSelecionado"
          class="w-full appearance-none bg-gray-100 border border-gray-300 text-gray-800 p-3 pr-10 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">

          <option [ngValue]="null" disabled>Escolha uma opção</option>

          <option *ngFor="let item of sistemas" [ngValue]="item[1]">
            {{ item[1] }}
          </option>
        </select>

        <div class="absolute inset-y-0 right-0 flex items-center px-2 text-gray-500 pointer-events-none">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path d="M19 9l-7 7-7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </div>
      </div>
    </div>
  </div>

  <div class="flex justify-end mb-6">
    <button
      class="bg-blue-700 hover:bg-blue-800 text-white font-semibold px-6 py-2 rounded-lg transition duration-300 shadow"
      (click)="aplicarFiltros()">Aplicar filtros
    </button>
  </div>

  <!-- Estatísticas principais -->
  <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
      <h3 class="text-gray-500 text-sm mb-2">Total na Página (dia)</h3>
      <p class="text-3xl font-bold text-blue-600">{{ totalPagina }}</p>
    </div>
    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
      <h3 class="text-gray-500 text-sm mb-2">Total no Grupo (dia)</h3>
      <p class="text-3xl font-bold text-green-600">{{ totalGrupo }}</p>
    </div>
    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
      <h3 class="text-gray-500 text-sm mb-2">Total no Intervalo</h3>
      <p class="text-3xl font-bold text-purple-600">{{ totalIntervalo }}</p>
    </div>
    
    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
      <h3 class="text-gray-500 text-sm mb-2">Total link encurtado</h3>
      <p class="text-3xl font-bold text-slate-900">{{ totalLinkEncurtado }}</p>
    </div>

    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
      <h3 class="text-gray-500 text-sm mb-2">Taxa de rejeição para acessar o grupo</h3>
      <p class="text-3xl font-bold text-purple-600">{{ taxaRejeicao | number:'1.2-2' }}%</p>
    </div>
  </div>

  <!-- Gráfico -->
  <div class="flex gap-2">
    <div class="w-full bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-10">
      <h2 class="text-lg font-semibold text-gray-700 mb-4">Distribuição por Hora</h2>
      <div class="bg-gray-100 rounded p-4 text-gray-400">
        @if (chartOptions) {
        <apx-chart [series]="chartOptions!.series!" [chart]="chartOptions!.chart!"
          [dataLabels]="chartOptions!.dataLabels!" [plotOptions]="chartOptions.plotOptions!"
          [yaxis]="chartOptions.yaxis!" [xaxis]="chartOptions.xaxis!" [fill]="chartOptions.fill!"
          [title]="chartOptions.title!"></apx-chart>
        }
      </div>
    </div>

    <div class="w-2/4 bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-10">
      <h2 class="text-lg font-semibold text-gray-700 mb-4">Cliques para entrar nos grupos de cada sistema</h2>
      <div class="flex justify-center items-center h-full" *ngIf="chartOptionsPizza!" id="chartPizza">
        <apx-chart [series]="chartOptionsPizza.series!" [chart]="chartOptionsPizza.chart!" [labels]="chartOptionsPizza.labels!"
          [responsive]="chartOptionsPizza.responsive!"></apx-chart>
      </div>
    </div>
  </div>
</div>
}

@if (tab.match('CONFIGURACAO')) {
<app-configuracao></app-configuracao>
}

@if (tab.match('CONFIGUAR-PAGE')) {
  <app-landing-settings></app-landing-settings>
}